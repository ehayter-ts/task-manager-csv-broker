!function(){metadata={systemName:"csvreader",displayName:"CSV Reader Broker",description:"A broker that reads a CSV file and returns each line as a list.",configuration:{FirstRowIsHeader:{displayName:"First Row Is Header",type:"boolean",value:!0},LineSplitChar:{displayName:"Line Split Character",type:"string",value:"newline"}}},ondescribe=async function({configuration:e}){postSchema({objects:{lines:{displayName:"Lines",description:"Describes all lines in a CSV file",properties:{fileContent:{displayName:"File Content",type:"string"},line:{displayName:"Line",type:"string"}},methods:{getLines:{displayName:"Get Lines",type:"list",inputs:["fileContent"],outputs:["line"]}}}}})},onexecute=async function({objectName:t,methodName:r,parameters:n,properties:i,configuration:a,schema:o}){switch(t){case"lines":await async function(t,r,n){switch(t){case"getLines":await function(t,r){return new Promise((n,i)=>{try{const i=e.decode((s=t.fileContent.toString(),s.split("<content>")[1].split("</content>")[0]));var a=[];a="newline"==r.LineSplitChar.toString()?i.split(/\r?\n/):i.split(r.LineSplitChar.toString());var o=[];for(let e=r.FirstRowIsHeader?1:0;e<a.length;e++)o.push({line:a[e]});postResult(o.map(e=>({line:e.line}))),n()}catch(e){i(e)}var s})}(r,n);break;default:throw new Error("The method "+t+" is not supported.")}}(r,i,a);break;default:throw new Error("The object "+t+" is not supported.")}};var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var r,n,i,a,o,s,c,d="",h=0;for(t=e._utf8_encode(t);h<t.length;)a=(r=t.charCodeAt(h++))>>2,o=(3&r)<<4|(n=t.charCodeAt(h++))>>4,s=(15&n)<<2|(i=t.charCodeAt(h++))>>6,c=63&i,isNaN(n)?s=c=64:isNaN(i)&&(c=64),d=d+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(c);return d},decode:function(t){var r,n,i,a,o,s,c="",d=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<t.length;)r=this._keyStr.indexOf(t.charAt(d++))<<2|(a=this._keyStr.indexOf(t.charAt(d++)))>>4,n=(15&a)<<4|(o=this._keyStr.indexOf(t.charAt(d++)))>>2,i=(3&o)<<6|(s=this._keyStr.indexOf(t.charAt(d++))),c+=String.fromCharCode(r),64!=o&&(c+=String.fromCharCode(n)),64!=s&&(c+=String.fromCharCode(i));return c=e._utf8_decode(c)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",r=0,n=0,i=0,a=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(i=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&i),r+=2):(i=e.charCodeAt(r+1),a=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&a),r+=3);return t}}}();
//# sourceMappingURL=index.js.map
